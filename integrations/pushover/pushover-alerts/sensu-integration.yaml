---
api_version: catalog/v1
type: Integration
metadata:
  namespace: pushover
  name: pushover-alerts
spec:
  class: supported
  provider: alerts
  display_name: Pushover Alerts
  short_description: Integrates Sensu Integrations with Pushover Push Notifications
  supported_platforms:
    - linux
  tags:
    - pushover
    - incidents
    - alerts
  contributors:
    - "@sensu"
    - "@nixwiz"
    - "@jspaleta"
    - "@calebhailey"
  prompts:
    - type: section
      title: Pushover Application
    - type: markdown
      body: |
        This integration requires access to a Pushover Application
    - type: question
      name: pushover_user_key
      required: true
      input:
        type: string
        title: Pushover User Key
    - type: question
      name: pushover_app_api_token
      required: true
      input:
        type: string
        title: Pushover Application API Token
  resource_patches:
    - resource:
        api_version: core/v2
        type: Handler
        name: pushover-alerts
      patches:
        - path: /spec/env_vars/-
          op: add
          value: "SENSU_PUSHOVER_USERKEY=[[pushover_user_key]]"
        - path: /spec/env_vars/-
          op: add
          value: "SENSU_PUSHOVER_TOKEN=[[pushover_app_api_token]]"
  post_install:
    - type: section
      title: Secret Management
    - type: markdown
      body: |
        In order to provide the best experience installing integrations
        from the catalog, we have embedded all credentials directly in the installed Sensu
        Resources. This means that all sensu users with read access to the cluster will be
        able to see these resources and embedded credentials in plain text. Resources are also
        very likely to be stored unencrypted at rest in the Sensu store.

        We recommend that you consider migrating these secrets to a supported
        [secrets store](https://docs.sensu.io/sensu-go/latest/operations/manage-secrets/secrets-management/).
